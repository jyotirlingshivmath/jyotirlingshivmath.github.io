<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Shivmath Admission Form</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  label { display: block; margin-top: 10px; }
  input, select { width: 300px; padding: 5px; margin-top: 5px; }
  #photoPreview { margin-top: 10px; width: 150px; height: 150px; object-fit: cover; border: 1px solid #ccc; }
  button { margin-top: 20px; padding: 10px 20px; }
</style>
</head>
<body>

<h2>Shivmath Admission Form</h2>

<form id="admissionForm" method="post" action="https://script.google.com/macros/s/AKfycbxWijRNbq7WWeRrjXWxdKyEVRgpzxlkVl2mkbaMebRbtAA2hEi_GXkyKGAOZCc1ejuR/exec" target="_blank">
  
  <label>Admission No: <input type="text" name="admno" id="admno" readonly></label>
  <label>Admission Date: <input type="date" name="registration_date" id="admdate" readonly></label>
  
  <label>Name: <input type="text" name="student_name" required></label>
  <label>Gender:
    <select name="gender" required>
      <option value="">Select</option>
      <option value="Male">Male</option>
      <option value="Female">Female</option>
      <option value="Other">Other</option>
    </select>
  </label>
  
  <label>Date of Birth: <input type="date" name="dob" required></label>
  <label>Category: <input type="text" name="category"></label>
  <label>Blood Group: <input type="text" name="blood_group"></label>
  <label>Father's Name: <input type="text" name="father_name"></label>
  <label>Father's Occupation: <input type="text" name="father_occ"></label>
  <label>Mother's Name: <input type="text" name="mother_name"></label>
  <label>Mother's Occupation: <input type="text" name="mother_occ"></label>
  <label>Mobile: <input type="tel" name="mobile"></label>
  <label>Email: <input type="email" name="email"></label>
  <label>Address: <input type="text" name="address"></label>
  <label>Class: <input type="text" name="class_name"></label>
  <label>Previous School: <input type="text" name="prev_school"></label>
  
  <label>Photo: <input type="text" name="photo_filename" id="photoFilename" placeholder="Optional"></label>
  <img id="photoPreview" src="" alt="Photo Preview">

  <button type="submit">Submit</button>
</form>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const admno = document.getElementById("admno");
  const admdate = document.getElementById("admdate");
  const photoInput = document.getElementById("photoFilename");
  const photoPreview = document.getElementById("photoPreview");

  // Auto increment Admission Number
  let lastAdm = parseInt(localStorage.getItem("lastAdm")) || 3000;
  admno.value = ++lastAdm;
  localStorage.setItem("lastAdm", lastAdm);

  // Set current date
  admdate.value = new Date().toISOString().slice(0,10);

  // Optional: show preview if user types photo filename
  photoInput.addEventListener("input", function() {
    if(photoInput.value.trim() !== ""){
      photoPreview.src = "https://via.placeholder.com/150?text=" + encodeURIComponent(photoInput.value);
    } else {
      photoPreview.src = "";
    }
  });
});
</script>

</body>
</html>
