<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Fee Receipt | Shivmath Vedic Vidyalaya</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    font-family: Arial, sans-serif;
    background:#f4f4f4;
}
.container{
    max-width:800px;
    margin:auto;
    background:#fff;
    padding:20px;
    border:1px solid #000;
}
h2,h3{
    text-align:center;
    margin:5px 0;
}
.row{
    display:flex;
    gap:10px;
    margin-bottom:10px;
}
.row label{
    width:150px;
    font-weight:bold;
}
.row input, .row select{
    flex:1;
    padding:5px;
}
.search-box{
    margin-bottom:15px;
    background:#eef;
    padding:10px;
}
button{
    padding:8px 15px;
    cursor:pointer;
}
.total{
    font-weight:bold;
}
.print-btn{
    margin-top:20px;
    text-align:center;
}
@media print{
    .search-box, .print-btn{
        display:none;
    }
}
</style>
</head>

<body>

<div class="container">

<h2>üïâÔ∏è Shivmath Vedic Vidyalaya üïâÔ∏è</h2>
<h3>Student Fee Receipt (Student Copy)</h3>
<hr>

<!-- SEARCH SECTION -->
<div class="search-box">
    <b>Search Student by Name:</b><br><br>
    <input type="text" id="searchName" placeholder="Enter Student Name">
    <button onclick="searchStudent()">Search</button>
</div>

<!-- RECEIPT FORM -->
<div class="row">
    <label>Student Name:</label>
    <input type="text" id="studentName" readonly>
</div>

<div class="row">
    <label>Father Name:</label>
    <input type="text" id="fatherName" readonly>
</div>

<div class="row">
    <label>Class:</label>
    <select id="class" disabled>
        <option>Mont</option>
        <option>Nursery</option>
        <option>KG</option>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
        <option>6</option>
        <option>7</option>
        <option>8</option>
    </select>
</div>

<div class="row">
    <label>Fee Month:</label>
    <select id="feeMonth">
        <option>January</option>
        <option>February</option>
        <option>March</option>
        <option>April</option>
        <option>May</option>
        <option>June</option>
        <option>July</option>
        <option>August</option>
        <option>September</option>
        <option>October</option>
        <option>November</option>
        <option>December</option>
    </select>
</div>

<div class="row">
    <label>Total Fee:</label>
    <input type="number" id="totalFee" value="0">
</div>

<div class="row">
    <label>Paid Now:</label>
    <input type="number" id="paidFee" value="0" oninput="calculateRemaining()">
</div>

<div class="row total">
    <label>Remaining Fee:</label>
    <input type="number" id="remainingFee" readonly>
</div>

<div class="print-btn">
    <button onclick="window.print()">üñ®Ô∏è Print Receipt</button>
</div>

</div>

<!-- ================= JAVASCRIPT ================= -->
<script>
function searchStudent(){
    const name = document.getElementById("searchName").value.trim().toLowerCase();

    if(name === ""){
        alert("Please enter student name");
        return;
    }

    const students = JSON.parse(localStorage.getItem("students")) || [];

    if(students.length === 0){
        alert("No admission data found.\nPlease register student first.");
        return;
    }

    const student = students.find(s =>
        s.name && s.name.toLowerCase().includes(name)
    );

    if(!student){
        alert("Student not found");
        return;
    }

    document.getElementById("studentName").value = student.name;
    document.getElementById("fatherName").value = student.fatherName || "";
    document.getElementById("class").value = student.class || "";
}

function calculateRemaining(){
    const total = Number(document.getElementById("totalFee").value) || 0;
    const paid = Number(document.getElementById("paidFee").value) || 0;

    let remaining = total - paid;
    if(remaining < 0) remaining = 0;

    document.getElementById("remainingFee").value = remaining;
}
</script>

</body>
</html>
